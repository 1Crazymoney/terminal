<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" ToolsVersion="14.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <ProjectGuid>{E437B604-3E98-4F40-A927-E173E818EA4B}</ProjectGuid>
    <Keyword>Win32Proj</Keyword>
    <RootNamespace>openconsoleproxy</RootNamespace>
    <ProjectName>OpenConsoleProxy</ProjectName>
    <TargetName>OpenConsoleProxy</TargetName>
    <ConfigurationType>DynamicLibrary</ConfigurationType>
  </PropertyGroup>
  <Import Project="$(SolutionDir)src\common.build.pre.props" />
  <ItemGroup>
    <Midl Include="IConsoleHandoff.idl">
      <!-- 
        In Razzle, IDL files generate %FileName%.h
        In Visual Studio, IDL files generate %FileName%_h.h
        Visual Studio is easier to override than Razzle.
        This has to be built in both the OS and outside, so we
        override the easier-to-override side to a uniform name.
      -->
      <HeaderFileName>IConsoleHandoff.h</HeaderFileName>
      <MinimumTargetSystem>NT100</MinimumTargetSystem>
      <OutputDirectory>$(IntDir)</OutputDirectory>
    </Midl>
    <Midl Include="ITerminalHandoff.idl">
      <HeaderFileName>ITerminalHandoff.h</HeaderFileName>
      <MinimumTargetSystem>NT100</MinimumTargetSystem>
      <OutputDirectory>$(IntDir)</OutputDirectory>
    </Midl>
  </ItemGroup>
  <ItemGroup>
    <ClInclude Include="$(IntDir)\IConsoleHandoff.h" />
    <ClInclude Include="$(IntDir)\ITerminalHandoff.h" />
  </ItemGroup>
  <ItemGroup>
    <ClCompile Include="$(IntDir)\dlldata.c" />
    <ClCompile Include="$(IntDir)\IConsoleHandoff_i.c" />
    <ClCompile Include="$(IntDir)\IConsoleHandoff_p.c" />
    <ClCompile Include="$(IntDir)\ITerminalHandoff_i.c" />
    <ClCompile Include="$(IntDir)\ITerminalHandoff_p.c" />
  </ItemGroup>
  <ItemDefinitionGroup Condition="'$(WindowsTerminalBranding)'=='Release'">
    <ClCompile>
      <PreprocessorDefinitions>PROXY_CLSID=3171DE52-6EFA-4AEF-8A9F-D02BD67E7A4F;%(PreprocessorDefinitions)</PreprocessorDefinitions>
    </ClCompile>
  </ItemDefinitionGroup>
  <ItemDefinitionGroup Condition="'$(WindowsTerminalBranding)'=='Preview'">
    <ClCompile>
      <PreprocessorDefinitions>PROXY_CLSID=1833E661-CC81-4DD0-87C6-C2F74BD39EFA;%(PreprocessorDefinitions)</PreprocessorDefinitions>
    </ClCompile>
  </ItemDefinitionGroup>
  <ItemDefinitionGroup Condition="'$(WindowsTerminalBranding)'==''">
    <ClCompile>
      <PreprocessorDefinitions>PROXY_CLSID=DEC4804D-56D1-4F73-9FBE-6828E7C85C56;%(PreprocessorDefinitions)</PreprocessorDefinitions>
    </ClCompile>
  </ItemDefinitionGroup>
  <ItemDefinitionGroup>
    <ClCompile>
      <AdditionalIncludeDirectories>..;%(AdditionalIncludeDirectories)</AdditionalIncludeDirectories>
      <PreprocessorDefinitions>REGISTER_PROXY_DLL;%(PreprocessorDefinitions)</PreprocessorDefinitions>
      <PrecompiledHeader>NotUsing</PrecompiledHeader>
    </ClCompile>
    <Link>
      <ModuleDefinitionFile>OpenConsoleProxy.def</ModuleDefinitionFile>
    </Link>
  </ItemDefinitionGroup>
  <!-- Careful reordering these. Some default props (contained in these files) are order sensitive. -->
  <Import Project="$(SolutionDir)src\common.build.post.props" />
</Project>
